"use strict";(()=>{var r="scriptsLoaded";var s="IS_DEBUG_MODE";window.IS_DEBUG_MODE=E();window.DEBUG=function(...o){window.IS_DEBUG_MODE&&console.log(...o)};window.setDebugMode=o=>{localStorage.setItem(s,o.toString())};function E(){let o=localStorage.getItem(s);return!!(o&&o==="true")}var c="jsEnv";window.SCRIPTS_ENV=p();window.setScriptsENV=o=>{if(o!=="dev"&&o!=="prod"){console.error("Invalid environment. Pass `dev` or `prod`");return}localStorage.setItem(c,o),window.SCRIPTS_ENV=o,console.log(`Environment successfully set to ${o}`)};function p(){return localStorage.getItem(c)||"prod"}var l="http://localhost:3000/",_="https://cdn.jsdelivr.net/gh/igniteagency/kws-webflow-site@latest/dist/";window.JS_SCRIPTS=new Set;var i=[];window.addEventListener("DOMContentLoaded",u);function u(){console.debug(`Current JS Scripts mode: ${window.SCRIPTS_ENV}`),window.SCRIPTS_ENV==="dev"?(console.debug("To run JS scripts from production CDN, execute `window.setScriptsENV('prod')` in the browser console"),I()):(console.debug("To run JS scripts from localhost, execute `window.setScriptsENV('dev')` in the browser console"),S())}function S(){var e;let o=window.SCRIPTS_ENV==="dev"?l:_;(e=window.JS_SCRIPTS)==null||e.forEach(n=>{let t=document.createElement("script");t.src=o+n,t.defer=!0;let d=new Promise((a,w)=>{t.onload=a,t.onerror=()=>{console.error(`Failed to load script: ${n}`)}});i.push(d),document.body.appendChild(t)}),Promise.allSettled(i).then(()=>{window.DEBUG("All scripts loaded"),window.dispatchEvent(new CustomEvent(r))})}function I(){let e=new AbortController,n=setTimeout(()=>{e.abort()},300);fetch(l,{signal:e.signal}).then(t=>{if(!t.ok)throw console.error({response:t}),new Error("localhost response not ok")}).catch(()=>{console.error("localhost not resolved. Switching to production"),window.setScriptsENV("prod")}).finally(()=>{clearTimeout(n),S()})}})();
